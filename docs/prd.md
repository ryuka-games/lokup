# Lokup - プロダクト要件定義書（PRD）

## 概要

**プロダクト名**: Lokup（読み: ルックアップ）

**コンセプト**: GitHubリポジトリの健康診断ツール。「見る（Look）」と「向上する（Up）」を掛け合わせた名前。

**ターゲットユーザー**:
- 経営者・マネージャー: 技術投資の判断材料がほしい
- 技術リーダー・開発者: 具体的に何を改善すべきか知りたい

## 解決する課題

「リファクタリングしたいです」→「で、売上上がるの？」問題。

技術的負債や開発効率の低下を**数字で可視化**し、経営層への説明材料を提供する。

## 成功指標

- ユーザーが診断結果を見て「これは経営に見せられる」と思える
- 技術者が診断結果を見て「具体的に何を直すかわかる」と思える

---

## 診断項目

### 経営向け（開発効率系）

| 項目名 | 見るもの | 伝え方 |
|--------|----------|--------|
| 機能追加速度 | 新ファイル追加・機能コミットの推移 | 「開発スピードが落ちてます」 |
| バグ修正コスト | fix/bug系コミットの割合推移 | 「修正に時間取られてます」 |
| 手戻り率 | 同一ファイルへの短期間再修正 | 「やり直しが多発してます」 |
| リリースまでの日数 | PR作成→マージの平均日数 | 「リリースが遅くなってます」 |

### 技術向け（コード健全性系）

| 項目名 | 見るもの | 判定基準 |
|--------|----------|----------|
| 変更集中リスク | 短期間に何度も変更されるファイル | 30日で10回以上 → 危険 |
| 巨大ファイル | 行数が膨れたファイル | 500行超 → 警告、1000行超 → 危険 |
| 放置ファイル | 長期間触られてないコード | 1年以上変更なし → 要確認 |
| 属人化 | 特定の人しか触ってないファイル | 1人が80%以上 → 警告 |
| 依存の古さ | 依存パッケージのバージョン | メジャー2つ以上古い → 警告 |
| 深夜労働 | コミット時間帯の偏り | 22時〜5時が30%以上 → 警告 |

---

## MVP機能（実装済み）

### 入力
- CLI で `lokup owner/repo` 形式で指定
- GitHub 認証: `GITHUB_TOKEN` 環境変数 or `gh auth token`（対話的ログインも対応）
- `--days` オプションで分析期間を指定（デフォルト30日）

### 分析機能
- 4カテゴリスコア（Velocity / Quality / TechDebt / Health）
- 14種類のリスク検出
- DORAメトリクス（デプロイ頻度、変更失敗率、MTTR）
- 投資比率（Feature / BugFix / Refactor PR分類）
- トレンド比較（前期 vs 今期で「良くなった/悪くなった」を表示）

### 出力
- CLI サマリー表示
- HTML レポート: 3段階開示（総合グレード → カテゴリカード → 詳細）

---

## スコープ外（v2以降）

- チーム機能（複数人で同じレポートを見る）
- PDF等エクスポート
- Web UI（現在は CLI → HTML）
- 定期診断（毎週/毎月自動実行）

---

## 決定事項

- **技術スタック**: Go + CLI → HTML レポート（ADR-002 参照）
- **アーキテクチャ**: Vertical Slice + Clean Architecture + DDD ライト版
- **認証方式**: GITHUB_TOKEN or gh CLI（ADR-001 参照）

---

## 意思決定ログ

### メタファー vs ストレート

**選択**: B（ストレート）

健康診断メタファー（血圧、コレステロール等）は親しみやすいが、「結局何が悪いの？」となる。
項目名は技術者がすぐ分かる言葉にし、レイアウトだけ健康診断っぽさを残す。

### 名前の決定

**選択**: Lokup

- LookUp の母音を抜いた造語
- 「見る」「向上する」「調べる」の意味を含む
- Tumblr、Flickr と同じパターンでユニーク
